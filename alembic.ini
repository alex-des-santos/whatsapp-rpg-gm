# ==========================================
# CONFIGURAÇÃO ALEMBIC
# Migrações de banco de dados
# ==========================================

[alembic]
# Path para scripts de migração
script_location = alembic

# Template de arquivo
file_template = %%(year)d%%(month).2d%%(day).2d_%%(hour).2d%%(minute).2d_%%(rev)s_%%(slug)s

# Timezone para timestamps
timezone = America/Sao_Paulo

# Sys.path path
prepend_sys_path = .

# Versão da configuração
version_path_separator = os

# Incluir schemas se necessário
version_locations = %(here)s/alembic/versions

# Compare tipos de dados
compare_type = true
compare_server_default = true

# Configurações de banco
# URL será lida das variáveis de ambiente (.env)
# Para PostgreSQL remoto: postgresql://user:password@192.168.22.111:5432/dbname
# Para PostgreSQL local: postgresql://postgres:password@localhost:5432/dbname
sqlalchemy.url = 

# Logging config
[loggers]
keys = root,sqlalchemy,alembic

[handlers]
keys = console

[formatters]
keys = generic

[logger_root]
level = INFO
handlers = console
qualname =

[logger_sqlalchemy]
level = INFO
handlers = console
qualname = sqlalchemy.engine
propagate = 0

[logger_alembic]
level = INFO
handlers = console
qualname = alembic

[handler_console]
class = StreamHandler
args = (sys.stderr,)
level = INFO
formatter = generic

[formatter_generic]
format = %(levelname)-5.5s [%(name)s] %(message)s
datefmt = %H:%M:%S

# ==========================================
# Configurações específicas por ambiente
# ==========================================

[testing]
sqlalchemy.url = sqlite:///./test.db

[development]
sqlalchemy.url = postgresql://rpg_user:rpg_password@localhost:5432/rpg_db

[production]
sqlalchemy.url = postgresql://rpg_user:rpg_password@postgres:5432/rpg_db